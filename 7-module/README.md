# Аутентификация/Авторизация

Любой процесс аутентификации/авторизации можно разбить на три этапа:
1. Получение данных пользователя либо от самого пользователя, например, логин и пароль, либо от 
социальной сети, если вход выполняется через нее.
2. Проверка полученных данных. 
3. Принятие решение "подходит" ли нам этот пользователь.

При использовании модуля `passport` этот процесс определяется в сущности под названием "стратегия".
По умолчанию при успешном результате - идентификатор пользователя записывается в сессию, чтобы при
следующем заходе мы могли определить является ли этот пользователь залогиненным.

Официальная документация к модулю passport доступна на 
[официальном сайте](http://www.passportjs.org/).


## OAuth 2.0

[Протокол OAuth 2.0](https://oauth.net/2/) специально создан для решения ситуаций, когда одно 
приложение хочет получить доступ к данным пользователя, которые находятся у другого приложения.
Один из самых частых случаев использования - это получение сторонним сайтом у социальной сети 
информации о ее пользователе: имя, почтовый адрес, аватар и т.д. Наверняка вы пользовались этой 
удобной возможностью, не вводя множество раз на разных сайтах данные для регистрации мы можем 
использовать профиль социальной сети, дав права тому или иному сайту получить их самостоятельно и 
использовать для регистрации.


Огромное количество готовых стратегий позволяет нам очень легко подключать любые социальные сети, 
через которые пользователь сможет зарегистрироваться или залогиниться на нашем сайте.


## Сессии

Сессия - это объект, который хранится на сервере (обычно в памяти или базе данных), и который 
ассоциирован с конкретным пользователем. Когда пользователь делает запрос он предоставляет ключ
сессии, и мы таким образом получаем возможность хранить и использовать информацию о нем (например, 
кол-во заходов на страницу, товары, добавленные в избранное и т.д.). Если пользователь заходит 
впервые - то для него генерируется новый объект сессии и передается новый ключ.


Концепция сессий не связана с конкретными технологиями, все, что описано выше может быть успешно 
использовано при использовании любых языков программирования, фреймворков, даже сетевых протоколов. 
Традиционно при разработке веб-приложений для передачи ключа сессии используются cookie 
браузера. Это позволяет удобно создавать, читать и менять ключ, без необходимости уведомлять об этом
клиента.


Однако cookie работают хорошо лишь в условиях "традиционных" веб-приложений, когда сервер генерирует
HTML, который затем отображается браузером. В современных же реалиях, клиентом далеко не всегда
выступает браузер - это может быть и iOS, и Android приложение, да и сам браузер перестал быть 
просто средством отображения HTML, все чаще и чаще рендеринг происходит целиком на клиенте. В этих
случаях передача ключа сессии выполняется "явно", т.е. клиент должен хранить ключ у себя и 
передавать на сервер с каждым запросом, чтобы сервер мог понять что за пользователь сделал запрос.

