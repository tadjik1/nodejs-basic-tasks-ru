# Модель пользователя (Решение)

Любая модель содержит схему данных, так что наша задача состоит в том, чтобы объявить схему данных 
нашей модели пользователя.


Схема создается инстанцированием класса `mongoose.Schema` с передачей конфигурации полей в качестве 
первого аргумента и дополнительными настройками - вторым.
```js
const schema = new mongoose.Schema({/*
  fieldName: { ...fieldProperties... }
*/}, {/*
  ...settings...
*/});
```


Приступим к объявлению полей:
```js
const schema = new mongoose.Schema({
  email: { // поле email
    type: String, // строковое
    required: true, // обязательное
    unique: true, // уникальное (MongoDB создаст индекс по этому полю)
    validate: [{ // валидация с помощью регулярного выражения
      validator: (value) => {
        return /^[-.\w]+@([\w-]+\.)+[\w-]{2,12}$/.test(value);
      },
    }],
    lowercase: true, // приведение к нижнему регистру
    trim: true, // удаляем лишние пробелы
  },
  displayName: { // поле displayName
    type: String, // строковое
    required: true, // обязательное
    index: true, // по этому полю необходимо создать индекс
    trim: true, // обрезаем лишние пробелы
  },
}, {
  timestamps: true, // создать поля `createdAt` и `updatedAt`
});
```


Создание полей `createdAt` и `updatedAt` можно поручить `mongoose`, делается это с помощью 
дополнительной опции - `timestamps`.


В конце, когда схема готова - можно создать модель с помощью метода `mongoose.model`. В качестве 
аргументов в нее передаются:
- название модели
- схема данных
- название коллекции [опционально]

Обратите внимание, название коллекции можно не передавать - в этом случае `mongoose` будет 
использовать множественное число, образованное от названия модели (`User` -> `users`).
В данном случае такое поведение по умолчанию нас устраивает, поэтому достаточно передать лишь первые
два аргумента:
```js
mongoose.model('User', schema);
``` 
